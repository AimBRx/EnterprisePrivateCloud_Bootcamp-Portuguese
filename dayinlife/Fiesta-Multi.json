{"status":{},"contains_secrets":false,"product_version":"2.9.7","spec":{"description":"* [Fiesta Application](http:\/\/@@{NodeReact.address}@@\/)","resources":{"client_attrs":{"ec782821-2ed4-7db5-6e15-a9844e9e7a2a":{"y":243,"x":569},"0a3af439-b9f1-6a43-4c94-60978ef063fa":{"y":243,"x":569},"04d11132-2d9e-ffeb-8d8d-3917dbc42a0e":{"y":311,"x":376},"b015674c-752b-d422-94c3-2276eb54f960":{"y":385,"x":859},"970e34dd-cb9c-e4ef-bd82-1cc1e4310240":{"y":315,"x":772.75},"3dd64fc5-df58-07b5-61b0-60d16645c838":{"y":311,"x":376},"97debfb8-cb8e-4fe4-8b0a-a18c62596cbe":{"y":403,"x":185},"f40be51f-e0f0-7d90-cc54-1f4a42e256cc":{"y":243,"x":569},"e0ba6cb2-e118-5124-773f-f3dcea10b42a":{"y":385,"x":859},"928f49e4-268f-e56f-33ac-5df95f631b78":{"y":403,"x":185},"cf2e81c2-6f63-4030-8435-e4954d3f2549":{"y":403,"x":185},"46fb190d-098b-a8f9-e209-b66734ee5882":{"y":243,"x":569},"0430b3e2-14c3-4a96-8698-05ca6ea1d40e":{"y":385,"x":859},"e3bdc078-6992-44d2-8107-7d31d70294dc":{"y":243,"x":569},"3cb9f905-7dc5-4f9e-ba68-d1345215100e":{"y":385,"x":859},"0044927b_deployment":{"y":280,"x":513.75},"7dbb8a8a_deployment":{"y":294.8663607217,"x":327.5990821651},"ee2b305d-f056-c899-4d0a-5ae698f23807":{"y":385,"x":859},"7c08d325-b550-4b4b-acb0-078fbd2c1aef":{"y":243,"x":569},"b635fed5-2af9-e07e-597e-75778c1a9607":{"y":403,"x":185},"9599b0f4-8e1a-4d80-29b2-0f6f81382e5e":{"y":385,"x":859},"115ecb43-3d63-4b43-027c-a1e876682e90":{"y":403,"x":185},"0690a318-7cef-41fa-e9c1-01ca5d9e2756":{"y":315,"x":772.75}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"3864770f_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"391019fe_runbook","main_task_local_reference":{"kind":"app_task","name":"3864770f_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"c808b4d2_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"1f61d330_runbook","main_task_local_reference":{"kind":"app_task","name":"c808b4d2_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"c553f39d_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"e06cf8a3_runbook","main_task_local_reference":{"kind":"app_task","name":"c553f39d_dag"},"variable_list":[]},"name":"action_restart"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"d62872bf_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"6a1f0f7d_runbook","main_task_local_reference":{"kind":"app_task","name":"d62872bf_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"cb30ec1b_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"4894d126_runbook","main_task_local_reference":{"kind":"app_task","name":"cb30ec1b_dag"},"variable_list":[]},"name":"action_stop"}],"depends_on_list":[],"name":"MySQL","port_list":[],"tier":"","variable_list":[],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"NodeReact"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"21c5a65f_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"52bdec78_runbook","main_task_local_reference":{"kind":"app_task","name":"21c5a65f_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"NodeReact"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"7feaa10e_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"75b1a5f3_runbook","main_task_local_reference":{"kind":"app_task","name":"7feaa10e_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"NodeReact"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"e042bc0d_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"9ee27da6_runbook","main_task_local_reference":{"kind":"app_task","name":"e042bc0d_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"NodeReact"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"a30ac1c7_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"57819f94_runbook","main_task_local_reference":{"kind":"app_task","name":"a30ac1c7_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"NodeReact"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"89549cc9_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"610f4641_runbook","main_task_local_reference":{"kind":"app_task","name":"89549cc9_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[],"name":"NodeReact","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"AHV_VM","name":"MySQLAHV","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"0","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{},"boot_config":true,"disk_list":{}}}},"os_type":"Linux","create_spec":{"name":"MYSQL-@@{calm_time}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"0e26c135-d478-428e-9fb8-22c0acfa5f3a"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":2,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{CENTOS.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"4e4f1d3b-9492-4502-9eed-d994192669a4","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"CentOS_7_Cloud","uuid":"95f6a807-afdd-4c89-905a-68fe56f32f40"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]},{"description":"","action_list":[],"type":"AHV_VM","name":"NodeReact_AHV","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"editables":{"create_spec":{"resources":{"nic_list":{},"serial_port_list":{}}}},"os_type":"Linux","create_spec":{"name":"nodereacte-@@{calm_array_index}@@-@@{calm_time}@@","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"0e26c135-d478-428e-9fb8-22c0acfa5f3a"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":2,"gpu_list":[],"memory_size_mib":4096,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":{"cloud_init":{"meta_data":"","type":"","user_data":"#cloud-config\nusers:\n  - name: centos\n    ssh-authorized-keys:\n      - @@{CENTOS.public_key}@@\n    sudo: ['ALL=(ALL) NOPASSWD:ALL']"},"type":"","sysprep":null},"power_state":"ON","type":"","account_uuid":"4e4f1d3b-9492-4502-9eed-d994192669a4","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"app_package","type":"","name":"CentOS_7_Cloud","uuid":"95f6a807-afdd-4c89-905a-68fe56f32f40"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":""},"variable_list":[]}],"credential_definition_list":[{"username":"centos","description":"","type":"KEY","secret":{"attrs":{"is_secret_modified":false,"secret_reference":{}}},"name":"CENTOS"}],"package_definition_list":[{"description":"CentOS 7 Cloud Image","action_list":[],"type":"SUBSTRATE_IMAGE","service_local_reference_list":[],"name":"CentOS_7_Cloud","version":"","options":{"type":"","name":"CentOS_7_Cloud","resources":{"image_type":"DISK_IMAGE","checksum":{"checksum_algorithm":"","type":"","checksum_value":""},"source_uri":"http:\/\/download.nutanix.com\/calm\/CentOS-7-x86_64-1810.qcow2","version":{"product_version":"7","type":"","product_name":"CentOS"},"architecture":"X86_64","type":""},"description":""},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"MySQL"}],"name":"MYSQL_PACKAGE","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MYSQL_PACKAGE"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"1InstallSoftware"},{"kind":"app_task","name":"2ConfigureDB"}],"name":"8c4ce4a6_dag","state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"1InstallSoftware"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"2ConfigureDB"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"1InstallSoftware","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\nsudo yum install -y \"http:\/\/repo.mysql.com\/mysql-community-release-el7-5.noarch.rpm\"\nsudo yum update -y\nsudo setenforce 0\nsudo sed -i 's\/enforcing\/disabled\/g' \/etc\/selinux\/config \/etc\/selinux\/config\nsudo systemctl stop firewalld || true\nsudo systemctl disable firewalld || true\nsudo yum install -y mysql-community-server.x86_64\n\nsudo \/bin\/systemctl start mysqld\nsudo \/bin\/systemctl enable mysqld","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"2ConfigureDB","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\n#Mysql secure installation\nmysql -u root<<-EOF\n\nUPDATE mysql.user SET Password=PASSWORD('@@{db_password}@@') WHERE User='root';\nDELETE FROM mysql.user WHERE User='root' AND Host NOT IN ('localhost', '127.0.0.1', '::1');\nDELETE FROM mysql.user WHERE User='';\nDELETE FROM mysql.db WHERE Db='test' OR Db='test\\_%';\nFLUSH PRIVILEGES;\nEOF\n\nmysql -u root -p@@{db_password}@@ <<-EOF\n\n\/*Create Database*\/\nCREATE DATABASE @@{db_name}@@;\nUSE @@{db_name}@@;\n\n\/*Table structure for table products*\/\nDROP TABLE IF EXISTS Products;\nCREATE TABLE Products (\n  id int NOT NULL AUTO_INCREMENT,\n  product_name varchar(255) COLLATE utf8mb4_general_ci NOT NULL,\n  product_price decimal(5,2) NOT NULL,\n  product_image_url text COLLATE utf8mb4_general_ci NOT NULL,\n  product_comment varchar(255) COLLATE utf8mb4_general_ci DEFAULT NULL,\n  PRIMARY KEY (id)\n);\n\/*Dumping data into table Products*\/\nINSERT INTO Products (product_name,product_price,product_image_url,product_comment) VALUES ('Single Banquet Chair Cover',2.99,'https:\/\/cdn.shopify.com\/s\/files\/1\/1832\/6341\/products\/SASH_71_046_D04_0a16a508-5cd5-422f-ab7d-45acee11f6d1_1000x.jpg?v=1571323936','Vendor in on Wednesdays only.');\nINSERT INTO Products (product_name,product_price,product_image_url,product_comment) VALUES ('12 large ballons',2.30,'https:\/\/cdn.shopify.com\/s\/files\/1\/1832\/6341\/products\/BLOON_MET_GOLD__01_1000x.jpg?v=1571327220','On back order');\nINSERT INTO Products (product_name,product_price,product_image_url,product_comment) VALUES ('90x132 Rectangle Table Cloth',24.50,'https:\/\/cdn.shopify.com\/s\/files\/1\/1832\/6341\/products\/TAB_02_5454_SILV__02_7bb66485-2943-489e-a7c7-8d3f2d810fc5.progressive.jpg?v=1571325198','Table cloth quality issues. Need to talk to vendor.');\nINSERT INTO Products (product_name,product_price,product_image_url,product_comment) VALUES ('120\\\" Round Table Cloth',14.00,'https:\/\/cdn.shopify.com\/s\/files\/1\/1832\/6341\/products\/TAB_120_WHT-2_1000x.jpg?v=1571323057','Need double order next time.');\nINSERT INTO Products (product_name,product_price,product_image_url,product_comment) VALUES ('5 Pack Linen Napkins',5.25,'https:\/\/cdn.shopify.com\/s\/files\/1\/1832\/6341\/products\/NAP_OSC_WHT_1000x.jpg?v=1571323239','Dont buy the gray ones. Only Beige or white colors sell.');\nINSERT INTO Products (product_name,product_price,product_image_url,product_comment) VALUES ('12\\\"x108\\\" Inch Table Runner',2.42,'https:\/\/cdn.shopify.com\/s\/files\/1\/1832\/6341\/products\/RUN_STN_CHMP-2_large.progressive.jpg?v=1571323435','Vendor is discontinuing these July 2020.');\nINSERT INTO Products (product_name,product_price,product_image_url,product_comment) VALUES ('21 FT Table Skirt',15.00,'https:\/\/cdn.shopify.com\/s\/files\/1\/1832\/6341\/products\/SKT_POLY_WHT_21__01_1000x.jpg?v=1571323258','Get more variety from vendor as per customers feedback. ');\nINSERT INTO Products (product_name,product_price,product_image_url,product_comment) VALUES ('Pretty Flowers Center Piece',25.50,'https:\/\/cdn.shopify.com\/s\/files\/1\/1832\/6341\/products\/PROP_CUPK_001__02_1000x.jpg?v=1571323944',NULL);\nINSERT INTO Products (product_name,product_price,product_image_url,product_comment) VALUES ('10 Champagne Flutes',4.50,'https:\/\/cdn.shopify.com\/s\/files\/1\/1832\/6341\/products\/PLST_CU0071_GOLD_1000x.jpg?v=1571325883','Place an order with vendor of 24 packets by next Saturday.');\nINSERT INTO Products (product_name,product_price,product_image_url,product_comment) VALUES ('Confetti Squares',3.99,'https:\/\/cdn.shopify.com\/s\/files\/1\/1832\/6341\/products\/BOTT_GLIT_002_GOLD__02_1000x.jpg?v=1571327289','On back order.');\n\n\/*Table structure for table Stores*\/\nDROP TABLE IF EXISTS Stores;\nCREATE TABLE Stores (\n  id int NOT NULL AUTO_INCREMENT,\n  store_name varchar(255) COLLATE utf8mb4_general_ci NOT NULL,\n  store_city varchar(255) COLLATE utf8mb4_general_ci NOT NULL,\n  store_state varchar(255) COLLATE utf8mb4_general_ci NOT NULL,\n  PRIMARY KEY (id)\n);\n\n\/* Dumping data into table Stores*\/\nINSERT INTO Stores (store_name,store_city,store_state) VALUES ('Party Xtravaganza','Durham','NC');\nINSERT INTO Stores (store_name,store_city,store_state) VALUES ('Party Xperience','San Jose','CA');\nINSERT INTO Stores (store_name,store_city,store_state) VALUES ('Party with Us','New York','NY');\nINSERT INTO Stores (store_name,store_city,store_state) VALUES ('IneXpensive Party','Northboro','Iowa');\n\n\/*Table structure for table InventoryRecords*\/\nDROP TABLE IF EXISTS InventoryRecords;\nCREATE TABLE InventoryRecords (\n  id int NOT NULL AUTO_INCREMENT,\n  product_id int NOT NULL,\n  product_name varchar(255) NOT NULL,\n  store_id int NOT NULL,\n  store_name varchar(255) NOT NULL,\n  quantity int DEFAULT '0',\n  local_price decimal(5,2) NOT NULL,\n  comment text COLLATE utf8mb4_general_ci,\n  PRIMARY KEY (id)\n); \n\n\/* Dumping data into table InventoryRecords*\/\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (2,'Single Banquet Chair Cover',1,'Party Xtravaganza',30,4.05,'These chair cover sell a lot in beige and dont sell enough in other colors. ');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (3,'90x132 Rectangle Table Cloth',1,'Party Xtravaganza',100,29.99,'');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (5,'5 Pack Linen Napkins',1,'Party Xtravaganza',10,6.99,'The best napkins, believe me. ');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (7,'21 FT Table Skirt',1,'Party Xtravaganza',56,17.99,'');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (8,'Pretty Flowers Center Piece',1,'Party Xtravaganza',100,29.99,'If not sold within first 24 hrs. Advertise as 50% off.');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (9,'10 Champagne Flutes',1,'Party Xtravaganza',98,7.99,'Clear Plastic.');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (1,'12 large ballons',2,'Party Xperience',47,2.99,'The biggest ballons');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (2,'Single Banquet Chair Cover',2,'Party Xperience',16,3.66,'Stretchy kind.');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (3,'90x132 Rectangle Table Cloth',2,'Party Xperience',60,25.95,'These table cloths are not popular in this store.');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (4,'120\" Round Table Cloth',2,'Party Xperience',1,15.99,'Good quality materials. popular product. Re-order.');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (5,'5 Pack Linen Napkins',2,'Party Xperience',100,5.99,'');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (6,'12\"x108\" Inch Table Runner',2,'Party Xperience',23,3.99,'');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (7,'21 FT Table Skirt',2,'Party Xperience',0,18.99,'Sold out');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (8,'Pretty Flowers Center Piece',2,'Party Xperience',2,29.99,'If not sold within first 24 hrs. Advertise as 50% off.');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (9,'10 Champagne Flutes',2,'Party Xperience',100,7.99,'');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (1,'12 large ballons',3,'Party with Us',100,3.99,'');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (2,'Single Banquet Chair Cover',3,'Party with Us',100,4.99,'');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (3,'90x132 Rectangle Table Cloth',3,'Party with Us',100,20.00,'On sale, discontinuing product.');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (4,'120\" Round Table Cloth',3,'Party with Us',3,15.95,'Popular item.');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (5,'5 Pack Linen Napkins',3,'Party with Us',64,4.99,'Order only light beige color next time.');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (6,'12\"x108\" Inch Table Runner',3,'Party with Us',0,5.99,'Sold out. ');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (7,'21 FT Table Skirt',3,'Party with Us',100,0.00,'');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (8,'Pretty Flowers Center Piece',3,'Party with Us',3,25.99,'If not sold within first 24 hrs. Advertize as 50% off.');\nINSERT INTO InventoryRecords (product_id,product_name,store_id,store_name,quantity,local_price,comment) VALUES (9,'10 Champagne Flutes',3,'Party with Us',87,5.99,'Clear Plastic');\n\n\n\/*Open up DB to other IPs*\/\nGRANT ALL PRIVILEGES ON @@{db_name}@@.* TO 'root'@'%' IDENTIFIED BY '@@{db_password}@@';\n\nFLUSH PRIVILEGES;\nEOF","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"10424551_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"8c4ce4a6_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"MYSQL_PACKAGE"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"Uninstall_sql"}],"name":"93139c02_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"MySQL"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"Uninstall_sql","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\necho \"Goodbye!\"","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"8670f89c_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"93139c02_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"NodeReact"}],"name":"Package3","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package3"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[{"kind":"app_task","name":"1InstallSoftware"},{"kind":"app_task","name":"2ConfApp"},{"kind":"app_task","name":"3ConfNginx"}],"name":"47b39829_dag","state":"ACTIVE","attrs":{"edges":[{"from_task_reference":{"kind":"app_task","name":"1InstallSoftware"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"2ConfApp"}},{"from_task_reference":{"kind":"app_task","name":"2ConfApp"},"edge_type":"user_defined","type":"","to_task_reference":{"kind":"app_task","name":"3ConfNginx"}}],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeReact"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"1InstallSoftware","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\n# Update and install packages\nsudo yum -y update\nsudo yum -y install wget git vim gcc gcc-c++ nginx\n\n# Install node\ncurl -sL https:\/\/rpm.nodesource.com\/setup_10.x | sudo bash -\nsudo yum install -y nodejs\nnode --version\n\n# Clone Repo\ngit clone https:\/\/github.com\/sharonpamela\/Fiesta.git\ncd ~\/Fiesta\nnpm install\ncd ~\/Fiesta\/client\nnpm install\nnpm run build\nnpm install nodemon concurrently\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeReact"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"2ConfApp","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\n# Modify DB config file\n\nsudo sed -i 's\/REPLACE_DB_NAME\/@@{db_name}@@\/g' ~\/Fiesta\/config\/config.js\nsudo sed -i 's\/REPLACE_DB_HOST_ADDRESS\/@@{MySQL.address}@@\/g' ~\/Fiesta\/config\/config.js\nsudo sed -i 's\/REPLACE_DB_DIALECT\/@@{db_dialect}@@\/g' ~\/Fiesta\/config\/config.js\nsudo sed -i 's\/REPLACE_DB_DOMAIN_NAME\/@@{db_domain_name}@@\/g' ~\/Fiesta\/config\/config.js\nsudo sed -i 's\/REPLACE_DB_USER_NAME\/@@{db_username}@@\/g' ~\/Fiesta\/config\/config.js\ndb_password='@@{db_password}@@'\ndb_escaped_pass=\"${db_password\/\/\\\/\/\\\\\/}\"\nsudo sed -i \"s\/REPLACE_DB_PASSWORD\/`echo $db_escaped_pass`\/g\" ~\/Fiesta\/config\/config.js\n\n# Create the unit file\necho '[Service]\n\nExecStart=\/usr\/bin\/node \/home\/centos\/Fiesta\/index.js\nRestart=always\nRestartSec=2s\n\nStandardOutput=syslog\nStandardError=syslog\n\nSyslogIdentifier=fiesta\n\nUser=root\nGroup=root\n\nEnvironment=NODE_ENV=production PORT=5001\n\n[Install]\nWantedBy=multi-user.target' | sudo tee \/etc\/systemd\/system\/fiesta.service\n\n# Reload daemons and start service\nsudo systemctl daemon-reload\nsudo systemctl start fiesta\nsudo systemctl enable fiesta\nsudo systemctl status fiesta -l\n\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"NodeReact"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"3ConfNginx","state":"ACTIVE","attrs":{"exit_status":[],"script":"#!\/bin\/bash\nset -ex\n\n# install node websockets\n# sudo npm install ws\n\n# create the nginx config\nsudo mv \/etc\/nginx\/nginx.conf \/etc\/nginx\/nginx.confbkp\necho \"user nginx;\nworker_processes auto;\nerror_log \/var\/log\/nginx\/error.log;\npid \/run\/nginx.pid;\n# Load dynamic modules. See \/usr\/share\/doc\/nginx\/README.dynamic.\ninclude \/usr\/share\/nginx\/modules\/*.conf;\nevents {\n    worker_connections 1024;\n}\nhttp {\n    log_format  main  '\\$remote_addr - \\$remote_user [\\$time_local] \\\"\\$request\\\" '\n                      '\\$status \\$body_bytes_sent \\\"\\$http_referer\\\" '\n                      '\\\"\\$http_user_agent\\\" \\\"\\$http_x_forwarded_for\\\"';\n    access_log  \/var\/log\/nginx\/access.log  main;\n    sendfile            on;\n    tcp_nopush          on;\n    tcp_nodelay         on;\n    keepalive_timeout   65;\n    types_hash_max_size 2048;\n    include             \/etc\/nginx\/mime.types;\n    default_type        application\/octet-stream;\n    # Load modular configuration files from the \/etc\/nginx\/conf.d directory.\n    # See http:\/\/nginx.org\/en\/docs\/ngx_core_module.html#include\n    # for more information.\n    include \/etc\/nginx\/conf.d\/*.conf;\n    server {\n        listen       80 default_server;\n        listen       [::]:80 default_server;\n        server_name  @@{address}@@;\n        root         \/usr\/share\/nginx\/html;\n        # Load configuration files for the default server block.\n        include \/etc\/nginx\/default.d\/*.conf;\n        location \/ {\n        proxy_pass http:\/\/127.0.0.1:5001;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade \\$http_upgrade;\n        proxy_set_header Connection 'upgrade';\n        proxy_set_header Host \\$host;\n        proxy_cache_bypass \\$http_upgrade;\n        }\n        error_page 404 \/404.html;\n            location = \/40x.html {\n        }\n        error_page 500 502 503 504 \/50x.html;\n            location = \/50x.html {\n        }\n    }\n}\" | sudo tee \/etc\/nginx\/nginx.conf\n\n#allow app access if SELinux is enabled\nsudo setenforce Permissive\n\n# start and enable nginx\nsudo systemctl start nginx\nsudo systemctl enable nginx\nsudo systemctl status nginx -l","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"CENTOS"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"29790a71_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"47b39829_dag"},"message_list":[],"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package3"},"retries":"0","description":"","message_list":[],"child_tasks_local_reference_list":[],"name":"e1cdd743_dag","state":"ACTIVE","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"17adb48b_runbook","state":"ACTIVE","main_task_local_reference":{"kind":"app_task","name":"e1cdd743_dag"},"message_list":[],"variable_list":[]}},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"7dbb8a8a_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"MYSQL_PACKAGE"}],"substrate_local_reference":{"kind":"app_substrate","name":"MySQLAHV"},"variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"name":"0044927b_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Package3"}],"substrate_local_reference":{"kind":"app_substrate","name":"NodeReact_AHV"},"variable_list":[],"description":""}],"description":"","action_list":[],"name":"AHV","variable_list":[{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"SECRET","name":"db_password","value":"","label":"","attrs":{"is_secret_modified":false,"secret_reference":{},"type":"SECRET"},"editables":{"value":true},"is_hidden":false},{"val_type":"STRING","is_mandatory":true,"description":"","data_type":"BASE","type":"LOCAL","name":"db_name","value":"fiestadb","label":"","attrs":{"type":"LOCAL"},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"db_dialect","value":"mysql","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"db_domain_name","value":"","label":"","attrs":{"type":""},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}},{"val_type":"STRING","is_mandatory":false,"description":"","data_type":"BASE","type":"LOCAL","name":"db_username","value":"root","label":"","attrs":{"type":""},"editables":{"value":true},"is_hidden":false,"options":{"type":"PREDEFINED","choices":[]}}]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"CENTOS"},"type":"USER"},"name":"Fiesta-Multi"},"api_version":"3.0","metadata":{"last_update_time":"1580865264111268","kind":"blueprint","spec_version":25,"creation_time":"1580263526477680","name":"Fiesta-Multi"}}